var path = require("path");
var fs = require("fs");

var shedCfg = require("./shedCfg.js");
var expDir = path.join(__dirname, "exp");
var files = fs.readdirSync(expDir);

var expMap = {};
for(var i = 0; i < files.length; ++i){
    var filePath = path.join(expDir, files[i]);
    var expContent = fs.readFileSync(filePath).toString();
    expMap[files[i]] = eval("(" + expContent + ")");
}

function getArr(str){
    var arr = str.split(",");
    for(var i = 0; i < arr.length; ++i){
        arr[i] = parseInt(arr[i]);
    }
    return arr;
}

function run(expName){
    var extname = path.extname(expName);
    expName = extname ? expName : expName + ".js";
    var lengths = getArr(shedCfg.lengths);
    var topScrolls = getArr(shedCfg.topScrolls);
    var edgeScrolls = getArr(shedCfg.edgeScrolls);
    var frontScrolls = getArr(shedCfg.frontScrolls);
    var count = shedCfg.count;
    var value = expMap[expName](lengths, topScrolls, edgeScrolls, frontScrolls);
    console.log("数量--->", value);
}
run(shedCfg.exp)
//run("fujializhu.js");