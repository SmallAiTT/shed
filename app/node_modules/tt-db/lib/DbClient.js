var dbUtils = require("./dbUtils");
module.exports = function(pool){
    var _pool = pool;
    this.query = function(sql, args, cb){
        var arr = Array.prototype.slice.apply(arguments);
        var cb = arr.pop();
        _pool.acquire(function(err, client){
            if(err) return cb(err);
            arr.push(function(err, results){
                _pool.release(client);
                err ? cb(err) : cb(null, results);
            })
            client.query.apply(client, arr);
        });
    };
    dbUtils.initDbOper(this);
};


